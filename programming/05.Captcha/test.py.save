from PIL import Image
import os, pytesseract, re, requests, cv2

# GET URL and Image
r = requests.get("http://challenge01.root-me.org/programmation/ch8/")
if re.search('img src="data:image/png;base64', r.text):
	print(r.text)
	matches = re.match(r"<html><head></head><body><link rel='stylesheet' property='stylesheet' id='s' type='text/css' href='/template/s.css' media='all' /><iframe id='iframe' src='https://www.root-me.org/?page=externe_header'></iframe><p></p><br/><img src="data:image/png;base64,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" /><br><br><form action="" method="POST"><input type="text" name="cametu" /><input type="submit" value="Try" /></form></body></html>, r.text)
	print(matches)
	r = requests.get(matches[0])
	if r.status_code == 200:
		with open("/home/tester/rootme-programming/05.Captcha/sample.png", "wb") as f:
			f.write(r.content)
